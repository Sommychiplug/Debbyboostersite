<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DebbyBooster – Test</title>
  <!-- Load Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <h1>DebbyBooster – Auth Test</h1>
  <div id="message"></div>
  
  <script>
    (function() {
      const messageDiv = document.getElementById('message');
      messageDiv.innerHTML = 'Checking Supabase...';

      // 1. Check if Supabase library loaded
      if (typeof window.supabase === 'undefined') {
        messageDiv.innerHTML = '❌ Supabase library failed to load.';
        console.error('Supabase library missing');
        return;
      }

      // 2. Initialize client
      let supabase;
      try {
        supabase = window.supabase.createClient(
          'https://qiacnkzrcfuphohyvwcy.supabase.co',
          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFpYWNua3pyY2Z1cGhvaHl2d2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzOTU1MDAsImV4cCI6MjA4Njk3MTUwMH0.jxAA51sJv64QYG8Li2-ynjpxvr4uJ7AsWxJGGixPnQ8'
        );
        console.log('✅ Supabase client created', supabase);
        messageDiv.innerHTML = '✅ Supabase client created. Trying signUp...';
      } catch (e) {
        messageDiv.innerHTML = '❌ Error creating client: ' + e.message;
        console.error(e);
        return;
      }

      // 3. Test signUp function
      window.testSignUp = async function(email, password) {
        try {
          const { data, error } = await supabase.auth.signUp({ email, password });
          if (error) throw error;
          console.log('SignUp success:', data);
          messageDiv.innerHTML = '✅ SignUp successful! Check your email (if confirmation required).';
          return data;
        } catch (err) {
          console.error('SignUp error:', err);
          messageDiv.innerHTML = '❌ SignUp error: ' + err.message;
        }
      };

      // Expose supabase globally for console testing
      window.supabase = supabase;

      // 4. Automatically try a test signup (you can change credentials)
      window.testSignUp('testuser_' + Date.now() + '@example.com', 'password123');
    })();
  </script>
</body>
</html>